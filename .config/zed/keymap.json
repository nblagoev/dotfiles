// Zed keymap
// https://zed.dev/docs/key-bindings
//
// To see the default key bindings run `zed: open default keymap` from the command palette.
[
  // Disabled
  {
    "context": "Workspace",
    "bindings": {
      "cmd-p": null,
    },
  },
  {
    "context": "Editor",
    "bindings": {
      "ctrl-w": null,
    },
  },
  {
    "context": "(Editor && mode == full)",
    "bindings": {
      "cmd-e": null,
    },
  },
  {
    "context": "(VimControl && !menu)",
    "bindings": {
      "space": null,
    },
  },
  {
    "context": "Pane",
    "bindings": {
      "ctrl--": null,
    },
  },

  // Custom keybinds
  {
    "context": "Workspace",
    "bindings": {
      "ctrl-w t": "terminal_panel::ToggleFocus",
      "ctrl-w p": "agent::ToggleFocus",
      "ctrl-w o": "project_panel::ToggleFocus",
      "ctrl-w q": "workspace::CloseActiveDock",
      "ctrl-w z": "workspace::ToggleZoom",
      // "alt-1": ["window::ActivateWindowTab", 0],
      // "alt-2": ["window::ActivateWindowTab", 1],
      // "alt-3": ["window::ActivateWindowTab", 2],
      // "alt-4": ["window::ActivateWindowTab", 3],
      // "alt-5": ["window::ActivateWindowTab", 4],
      // "alt-6": ["window::ActivateWindowTab", 5],
      // "alt-7": ["window::ActivateWindowTab", 6],
      // "alt-8": ["window::ActivateWindowTab", 7],
      // "alt-9": ["window::ActivateWindowTab", 8],
    },
  },
  {
    // Add these here because it seems like setting them to null doesn't
    // really do anything. Duplicating the workspace panel focus works.
    "context": "((VimControl && !menu) || (!Editor && !Terminal))",
    "bindings": {
      "ctrl-w t": "terminal_panel::ToggleFocus",
      "ctrl-w p": "agent::ToggleFocus",
      "ctrl-w o": "project_panel::ToggleFocus",
    },
  },
  {
    "context": "Editor",
    "bindings": {
      "cmd-p": "editor::ShowSignatureHelp",
      "ctrl--": "pane::SplitDown",
      "ctrl-\\": "pane::SplitRight",
    },
  },
  {
    "context": "((vim_mode == helix_normal || vim_mode == helix_select) && !menu)",
    "bindings": {
      "] ]": "pane::ActivateNextItem",
    },
  },
  {
    "context": "((vim_mode == helix_normal || vim_mode == helix_select) && !menu)",
    "bindings": {
      "[ [": "pane::ActivatePreviousItem",
    },
  },
  {
    "context": "vim_mode == helix_insert",
    "bindings": {
      "ctrl-x o": "editor::ShowCompletions",
      "ctrl-x a": "assistant::InlineAssist", // zed specific
      "ctrl-x p": "editor::ShowEditPrediction", // zed specific
    },
  },
  {
    // Do not exit insert mode when Esc is pressed during completion
    "context": "(Editor && vim_mode == insert && (menu || showing_completion))",
    "bindings": {
      "escape": "editor::Cancel",
    },
  },
  {
    // Enable VimSneak and BeamJump
    "context": "((vim_mode == normal || vim_mode == helix_normal) && !menu)",
    "bindings": {
      "s": "vim::PushSneak",
      "shift-s": "vim::PushSneakBackward",
    },
  },
]
